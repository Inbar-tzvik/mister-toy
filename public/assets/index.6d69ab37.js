import{r as p,o as l,c as S,a as f,b as F,d as u,e as B,w as k,F as m,f as s,g as y,t as c,h as $,i as v,v as b,j as T,k as N,l as w,m as D,n as A,p as C}from"./vendor.ea70d21b.js";const O=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function i(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=i(o);fetch(o.href,r)}};O();var d=(t,e)=>{const i=t.__vccOpts||t;for(const[a,o]of e)i[a]=o;return i};const R={name:"app",created(){this.$store.dispatch({type:"loadToys"})}};function L(t,e,i,a,o,r){const n=p("router-view");return l(),S(n)}var P=d(R,[["render",L]]);const h="/api/toy",g={query:V,getById:I,remove:E,save:U,getEmptyToy:q};function V(t){return f.get(h,{params:t}).then(e=>e.data)}function I(t){return f.get(h+t).then(e=>e.data)}function E(t){return f.delete(h+t)}function U(t){return t._id?f.put(h+t._id,t).then(e=>e.data):f.post(h,t).then(e=>e.data)}function q(){return{_id:"",name:"",price:0,labels:["Doll","Battery Powered","Baby"],inStock:!0,reviews:["Good","Nice","Fun"]}}var z={state:{toys:null,filterBy:null},getters:{toys(t){return t.toys}},mutations:{setToys(t,{toys:e}){t.toys=e},removeToy(t,{id:e}){const i=t.toys.findIndex(a=>a._id===e);t.toys.splice(i,1)},saveToy(t,{toy:e}){const i=t.toys.findIndex(a=>a._id===e._id);i!==-1?t.toys.splice(i,1,e):t.toys.push(e)},setFilter(t,{filterBy:e}){t.filterBy=e}},actions:{loadToys({commit:t,state:e}){g.query(e.filterBy).then(i=>{t({type:"setToys",toys:i})})},removeToy({commit:t},{id:e}){g.remove(e).then(()=>{t({type:"removeToy",id:e})})},saveToy({commit:t},{toy:e}){g.save(e).then(i=>{t({type:"saveToy",toy:i})})},filter({commit:t,dispatch:e},{filterBy:i}){t({type:"setFilter",filterBy:i}),e({type:"loadToys"})}}};const H=F({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:z}}),M={},j=s("h1",null,"Home page",-1),J=y("go to toys app");function G(t,e,i,a,o,r){const n=p("router-link");return l(),u(m,null,[j,B(n,{to:"/toy"},{default:k(()=>[J]),_:1})],64)}var K=d(M,[["render",G]]);const W={name:"toy-preview",props:{toy:Object},components:{},computed:{formatTime(){return new Date(this.toy.createdAt).toDateString()}},methods:{remove(t){this.$emit("removeToy",t)}}},X={class:"toy-preview"},Q=y("Details"),Y=y(" | "),Z=y("Edit");function ee(t,e,i,a,o,r){const n=p("router-link");return l(),u("li",X,[s("p",null,"Name: "+c(i.toy.name),1),s("p",null,"Price: "+c(i.toy.price),1),s("p",null,"Created At: "+c(r.formatTime),1),s("button",{onClick:e[0]||(e[0]=_=>r.remove(i.toy._id))},"X"),B(n,{to:"/toy/details/"+i.toy._id},{default:k(()=>[Q]),_:1},8,["to"]),Y,B(n,{to:"/toy/edit/"+i.toy._id},{default:k(()=>[Z]),_:1},8,["to"])])}var te=d(W,[["render",ee]]);const oe={props:{toys:{type:Array,required:!0}},components:{toyPreview:te},methods:{removeToy(t){this.$emit("removeToy",t)}}},ne={class:"toy-list"};function re(t,e,i,a,o,r){const n=p("toy-preview");return l(),u("ul",ne,[(l(!0),u(m,null,$(i.toys,_=>(l(),S(n,{onRemoveToy:r.removeToy,key:_.id,toy:_},null,8,["onRemoveToy","toy"]))),128))])}var se=d(oe,[["render",re]]);const ie={name:"toy-filter",data(){return{filterBy:{name:"",inStock:"",labels:[],sortBy:""}}},methods:{setFilter(){console.log(this.filterBy),this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))}}},le={class:"toy-filter"},ae=y(" Stock: "),ue=s("option",{value:""},"All",-1),ce=s("option",{value:"true"},"In stock",-1),ye=s("option",{value:"false"},"Not in stock",-1),de=[ue,ce,ye],pe=y(" Labels: "),_e=N('<option value="On wheels">On wheels</option><option value="Box game">Box game</option><option value="Art">Art</option><option value="Baby">Baby</option><option value="Doll">Doll</option><option value="Puzzle">Puzzle</option><option value="Outdoor">Outdoor</option>',7),me=[_e],fe=y(" Sort By: "),he=s("option",{value:"time"},"Time",-1),ve=s("option",{value:"name"},"Name",-1),ge=s("option",{value:"price"},"Price",-1),Be=[he,ve,ge];function Te(t,e,i,a,o,r){return l(),u("section",le,[v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.filterBy.name=n),onInput:e[1]||(e[1]=(...n)=>r.setFilter&&r.setFilter(...n)),type:"text",placeholder:"Search toy.."},null,544),[[b,o.filterBy.name]]),s("label",null,[ae,v(s("select",{onChange:e[2]||(e[2]=(...n)=>r.setFilter&&r.setFilter(...n)),"onUpdate:modelValue":e[3]||(e[3]=n=>o.filterBy.inStock=n)},de,544),[[T,o.filterBy.inStock]])]),s("label",null,[pe,v(s("select",{onChange:e[4]||(e[4]=(...n)=>r.setFilter&&r.setFilter(...n)),multiple:"","onUpdate:modelValue":e[5]||(e[5]=n=>o.filterBy.labels=n)},me,544),[[T,o.filterBy.labels]]),s("label",null,[fe,v(s("select",{onChange:e[6]||(e[6]=(...n)=>r.setFilter&&r.setFilter(...n)),"onUpdate:modelValue":e[7]||(e[7]=n=>o.filterBy.sortBy=n)},Be,544),[[T,o.filterBy.sortBy]])])])])}var ke=d(ie,[["render",Te]]);const $e={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return console.log(this.$store.getters.toys),this.$store.getters.toys},toysToShow(){if(!this.filterBy)return this.toys;const t=new RegExp(this.filterBy.name,"i");return this.toys.filter(e=>t.test(e.name))}},created(){},methods:{removeToy(t){this.$store.dispatch({type:"removeToy",id:t})},setFilter(t){this.$store.dispatch({type:"filter",filterBy:t})}},components:{toyList:se,toyFilter:ke}},we=s("h1",null,"Toy app",-1);function Se(t,e,i,a,o,r){const n=p("toy-filter"),_=p("toy-list");return l(),u("section",null,[we,B(n,{onSetFilter:r.setFilter},null,8,["onSetFilter"]),r.toys?(l(),S(_,{key:0,onRemoveToy:r.removeToy,toys:r.toysToShow},null,8,["onRemoveToy","toys"])):w("",!0)])}var xe=d($e,[["render",Se]]);const Fe={name:"toy-details",data(){return{toy:null}},created(){const{id:t}=this.$route.params;g.getById(t).then(e=>{this.toy=e})},methods:{goBack(){this.$router.push("/toy")}},computed:{formattedDate(){return new Date(this.toy.createdAt).toDateString()}}},be={key:0},Ne=s("p",null,[s("span",null,"Categories:")],-1),De=s("span",null,"PRICE:",-1),Ae=s("span",null,"Created at:",-1),Ce={key:0},Oe=s("h4",null,"Reviews:",-1);function Re(t,e,i,a,o,r){return l(),u(m,null,[o.toy?(l(),u("section",be,[s("h3",null,c(o.toy.name),1),s("p",null,c(o.toy._id),1),Ne,(l(!0),u(m,null,$(o.toy.labels,n=>(l(),u("p",{key:n},c(n),1))),128)),s("p",null,[De,y(" "+c(o.toy.price),1)]),s("p",null,[Ae,y(" "+c(r.formattedDate),1)]),o.toy.reviews?(l(),u("section",Ce,[Oe,s("ul",null,[(l(!0),u(m,null,$(o.toy.reviews,n=>(l(),u("li",{key:n},[s("p",null,"author: "+c(n.name),1),s("p",null,"Review: "+c(n.review),1)]))),128))])])):w("",!0)])):w("",!0),s("button",{onClick:e[0]||(e[0]=(...n)=>r.goBack&&r.goBack(...n))},"go back")],64)}var Le=d(Fe,[["render",Re]]);const Pe=D({history:A(),routes:[{path:"/",name:"home",component:K},{path:"/toy",name:"toy-app",component:xe},{path:"/toy/details/:id",name:"toy-details",component:Le}]}),x=C(P);x.use(Pe);x.use(H);x.mount("#app");
